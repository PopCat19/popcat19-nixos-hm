# ~/.config/hypr/userprefs.conf - Surface-specific configuration
# █░█ █▀ █▀▀ █▀█   █▀█ █▀█ █▀▀ █▀▀ █▀
# █▄█ ▄█ ██▄ █▀▄   █▀▀ █▀▄ ██▄ █▀░ ▄█

# Set your personal hyprland configuration here for Surface devices
# Optimized for Surface Pro/Go hardware

# Mouse and touchpad config - optimized for Surface
input {
    kb_layout = us
    follow_mouse = 1
    mouse_refocus = false
    accel_profile = flat
    sensitivity = 1.0
    force_no_accel = 1
    scroll_factor = 0.3
    numlock_by_default = true
    touchpad {
        scroll_factor = 0.3
        natural_scroll = true
        tap-to-click = true
        drag_lock = true
        disable_while_typing = false
        middle_button_emulation = true
    }
}

# Surface-specific device configuration
device {
    name = microsoft-surface-type-cover-touchpad
    enabled = true
    sensitivity = 1.0
    accel_profile = flat
    scroll_factor = 0.3
    natural_scroll = true
    tap-to-click = true
    drag_lock = true
    disable_while_typing = false
    middle_button_emulation = true
}

device {
    name = microsoft-surface-type-cover-keyboard
    enabled = true
    kb_layout = us
    numlock_by_default = true
}

device {
    name = microsoft-surface-type-cover-mouse
    enabled = true
    sensitivity = 1.0
    accel_profile = flat
    scroll_factor = 0.3
    natural_scroll = true
}

# # Surface Pen configuration
# device {
#     name = wacom-hid-52eb-pen
#     sensitivity = 1.0
#     transform = 0
# }

# # Surface Touch configuration
# device {
#     name = wacom-hid-52eb-finger
#     sensitivity = 1.0
#     natural_scroll = true
# }

# hyprshade / blue-filter - Surface display optimization
exec = hyprshade on blue-light-filter
bind = Alt+Super,N,exec,hyprshade toggle blue-light-filter
bind = Alt+Super,M,exec,hyprshade toggle cool-stuff
bind = Alt+Super,B,exec,hyprshade toggle extradark

# Surface-specific brightness controls (already handled by system keys)
# Additional brightness bindings for fine control
bind = Alt+Super,Plus,exec,brightnessctl s 5%+
bind = Alt+Super,Minus,exec,brightnessctl s 5%-

# dispatch dpms for Surface display
bind = Alt+Super,J,exec,hyprctl dispatch dpms toggle

# Smart gaps for Surface (smaller screen optimization)
# workspace = w[t1], gapsout:3, gapsin:3
# workspace = w[tg1], gapsout:3, gapsin:3
# workspace = f[1], gapsout:3, gapsin:3
# windowrulev2 = bordersize 1, floating:0, onworkspace:w[t1]
# windowrulev2 = rounding 8, floating:0, onworkspace:w[t1]
# windowrulev2 = bordersize 1, floating:0, onworkspace:w[tg1]
# windowrulev2 = rounding 8, floating:0, onworkspace:w[tg1]
# windowrulev2 = bordersize 1, floating:0, onworkspace:f[1]
# windowrulev2 = rounding 8, floating:0, onworkspace:f[1]

# fcitx5
exec-once = fcitx5

# Set fixed minsize for Surface display
windowrulev2 = minsize 800 600,class:^(org.pulseaudio.pavucontrol)$

# Pavucontrol bind
bind = Alt+Super,V,exec,pavucontrol

# Surface-specific window rules for better touch interaction
windowrulev2 = minsize 400 300,floating:1
windowrulev2 = maxsize 1800 1200,floating:1

# hyprshade time - vfr (optimized for Surface battery life)
debug:damage_tracking = 0
misc:vfr = true

# middle_click_paste disabled for touch-friendly experience
misc:middle_click_paste = 0

# Surface-specific gesture support
gestures {
    workspace_swipe = true
    workspace_swipe_fingers = 3
    workspace_swipe_distance = 300
    workspace_swipe_invert = true
    workspace_swipe_min_speed_to_force = 30
    workspace_swipe_cancel_ratio = 0.5
    workspace_swipe_create_new = true
    workspace_swipe_forever = false
}

# kwallet
exec-once = /usr/lib/pam_kwallet_init

# Surface-specific power management
bind = Super,F1,exec,systemctl suspend
bind = Super+Shift,F1,exec,systemctl hibernate

# Surface Type Cover function keys
bind = ,XF86AudioRaiseVolume, exec, wpctl set-volume @DEFAULT_AUDIO_SINK@ 4%+
bind = ,XF86AudioLowerVolume, exec, wpctl set-volume @DEFAULT_AUDIO_SINK@ 4%-
bind = ,XF86AudioMute, exec, wpctl set-mute @DEFAULT_AUDIO_SINK@ toggle
bind = ,XF86MonBrightnessUp, exec, brightnessctl s 10%+
bind = ,XF86MonBrightnessDown, exec, brightnessctl s 10%-

# Surface-specific app scaling for high DPI
windowrulev2 = size 1200 800,class:^(org.kde.dolphin)$
windowrulev2 = size 1000 700,class:^(kitty)$
windowrulev2 = size 1400 900,class:^(firefox)$
windowrulev2 = size 1400 900,class:^(zen-alpha)$